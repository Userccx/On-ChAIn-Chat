# IPFS å­˜å‚¨æœåŠ¡è¯¦è§£

## ğŸ“‹ æ¦‚è¿°

ä½ çš„åç«¯ä½¿ç”¨ IPFSï¼ˆInterPlanetary File Systemï¼‰æ¥å­˜å‚¨å¯¹è¯æ•°æ®ã€‚IPFS æ˜¯ä¸€ä¸ªå»ä¸­å¿ƒåŒ–çš„åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿã€‚

**æ¨èé…ç½®**ï¼šä½¿ç”¨ **Pinata æ¨¡å¼**ï¼ˆ24/7 å¯ç”¨ï¼Œé€‚åˆç”Ÿäº§ç¯å¢ƒï¼‰

è¯¦ç»† Pinata é…ç½®è¯·å‚è€ƒï¼š[PINATA_SETUP.md](./PINATA_SETUP.md)

## ğŸ”‘ æ ¸å¿ƒæ¦‚å¿µ

### ä»€ä¹ˆæ˜¯ IPFSï¼Ÿ

IPFS æ˜¯ä¸€ä¸ªç‚¹å¯¹ç‚¹çš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼š
- **å†…å®¹å¯»å€**ï¼šæ¯ä¸ªæ–‡ä»¶é€šè¿‡å…¶å†…å®¹çš„å“ˆå¸Œå€¼ï¼ˆCIDï¼‰æ¥æ ‡è¯†ï¼Œè€Œä¸æ˜¯ä½ç½®
- **å»ä¸­å¿ƒåŒ–**ï¼šæ•°æ®åˆ†å¸ƒåœ¨ç½‘ç»œä¸­çš„å¤šä¸ªèŠ‚ç‚¹ä¸Š
- **ä¸å¯å˜**ï¼šä¸€æ—¦ä¸Šä¼ ï¼Œå†…å®¹å“ˆå¸Œæ˜¯å›ºå®šçš„

### ä»€ä¹ˆæ˜¯ Pinï¼ˆå›ºå®šï¼‰ï¼Ÿ

**Pin æ˜¯ IPFS ä¸­æœ€é‡è¦çš„æ¦‚å¿µä¹‹ä¸€ï¼**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    IPFS èŠ‚ç‚¹å­˜å‚¨                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚   å·²å›ºå®š (Pinned) çš„å†…å®¹                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  ğŸ“Œ QmXxx... (å¯¹è¯è®°å½•)                               â”‚  â”‚
â”‚   â”‚  ğŸ“Œ QmYyy... (ç´¢å¼•æ–‡ä»¶)                               â”‚  â”‚
â”‚   â”‚  ğŸ“Œ QmZzz... (NFT å…ƒæ•°æ®)                             â”‚  â”‚
â”‚   â”‚  è¿™äº›å†…å®¹ä¼šæ°¸ä¹…ä¿ç•™ï¼Œä¸ä¼šè¢«åƒåœ¾å›æ”¶åˆ é™¤                 â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                              â”‚
â”‚   æœªå›ºå®š (Not Pinned) çš„å†…å®¹                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  ğŸ—‘ï¸ QmAaa... (ä¸´æ—¶ç¼“å­˜)                               â”‚  â”‚
â”‚   â”‚  ğŸ—‘ï¸ QmBbb... (å·²æ£€ç´¢çš„å¤–éƒ¨å†…å®¹)                       â”‚  â”‚
â”‚   â”‚  è¿™äº›å†…å®¹å¯èƒ½åœ¨åƒåœ¾å›æ”¶æ—¶è¢«åˆ é™¤                         â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¸ºä»€ä¹ˆéœ€è¦ Pinï¼Ÿ**
- IPFS èŠ‚ç‚¹ä¼šå®šæœŸè¿›è¡Œ**åƒåœ¾å›æ”¶**ï¼ˆGarbage Collectionï¼‰
- æœªè¢« Pin çš„å†…å®¹ä¼šè¢«åˆ é™¤ä»¥é‡Šæ”¾å­˜å‚¨ç©ºé—´
- Pin å‘Šè¯‰èŠ‚ç‚¹ï¼š"è¿™ä¸ªå†…å®¹å¾ˆé‡è¦ï¼Œè¯·æ°¸ä¹…ä¿ç•™"

---

## ğŸ—ï¸ ä½ çš„å­˜å‚¨æœåŠ¡æ¶æ„

### ä¸‰ç§ Pinning æ¨¡å¼

ä½ çš„ç³»ç»Ÿæ”¯æŒä¸‰ç§ pinning æ¨¡å¼ï¼Œé€šè¿‡ `IPFS_PINNING_SERVICE` é…ç½®ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å­˜å‚¨æ¨¡å¼é€‰æ‹©                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  1. "local" - æœ¬åœ° IPFS èŠ‚ç‚¹                                â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚     â”‚  ä½ çš„ç”µè„‘ â”€â”€â”€â–º æœ¬åœ° IPFS èŠ‚ç‚¹ (127.0.0.1:5001)      â”‚ â”‚
â”‚     â”‚                     â”‚                                â”‚ â”‚
â”‚     â”‚                     â–¼                                â”‚ â”‚
â”‚     â”‚              æ•°æ®å­˜å‚¨åœ¨ä½ è‡ªå·±çš„ç¡¬ç›˜ä¸Š                 â”‚ â”‚
â”‚     â”‚              éœ€è¦ IPFS å®ˆæŠ¤è¿›ç¨‹æŒç»­è¿è¡Œ               â”‚ â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â”‚  2. "pinata" - Pinata äº‘æœåŠ¡                                â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚     â”‚  ä½ çš„ç”µè„‘ â”€â”€â”€â–º Pinata API â”€â”€â”€â–º Pinata äº‘å­˜å‚¨        â”‚ â”‚
â”‚     â”‚                                                      â”‚ â”‚
â”‚     â”‚  â€¢ æ— éœ€è¿è¡Œæœ¬åœ°èŠ‚ç‚¹                                  â”‚ â”‚
â”‚     â”‚  â€¢ äº‘ç«¯æŒä¹…åŒ–ï¼Œé«˜å¯ç”¨                                â”‚ â”‚
â”‚     â”‚  â€¢ éœ€è¦ Pinata è´¦å·å’Œ API Key                        â”‚ â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â”‚  3. "none" - Mock æ¨¡å¼                                      â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚     â”‚  ä½ çš„ç”µè„‘ â”€â”€â”€â–º å†…å­˜ç¼“å­˜ï¼ˆä»…ç”¨äºæµ‹è¯•ï¼‰                â”‚ â”‚
â”‚     â”‚                                                      â”‚ â”‚
â”‚     â”‚  â€¢ æ•°æ®åªå­˜åœ¨å†…å­˜ä¸­                                  â”‚ â”‚
â”‚     â”‚  â€¢ é‡å¯åæ•°æ®ä¸¢å¤±                                    â”‚ â”‚
â”‚     â”‚  â€¢ é€‚åˆå¼€å‘æµ‹è¯•                                      â”‚ â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ Local IPFS é…ç½®

### 1. å®‰è£… IPFS

**macOS (ä½¿ç”¨ Homebrew):**
```bash
brew install ipfs
```

**æˆ–è€…ä¸‹è½½å®‰è£…åŒ…:**
https://docs.ipfs.tech/install/

### 2. åˆå§‹åŒ– IPFS èŠ‚ç‚¹

```bash
# é¦–æ¬¡åˆå§‹åŒ–
ipfs init

# å¯åŠ¨ IPFS å®ˆæŠ¤è¿›ç¨‹
ipfs daemon
```

å¯åŠ¨åï¼Œä½ ä¼šçœ‹åˆ°ï¼š
```
Initializing daemon...
API server listening on /ip4/127.0.0.1/tcp/5001   â† è¿™æ˜¯ API ç«¯å£
Gateway (readonly) server listening on /ip4/127.0.0.1/tcp/8080
```

### 3. é…ç½®åç«¯

åœ¨ `.env` æ–‡ä»¶ä¸­ï¼š
```env
# IPFS æœ¬åœ°èŠ‚ç‚¹é…ç½®
IPFS_PINNING_SERVICE=local
IPFS_API_URL=http://127.0.0.1:5001
IPFS_GATEWAY=https://ipfs.io/ipfs/
```

### 4. éªŒè¯è¿æ¥

```bash
# æ£€æŸ¥ IPFS æ˜¯å¦è¿è¡Œ
ipfs id

# æŸ¥çœ‹å·² pin çš„å†…å®¹
ipfs pin ls

# æ·»åŠ æµ‹è¯•æ–‡ä»¶
echo "Hello IPFS" | ipfs add
# è¾“å‡ºï¼šQmXXX... è¿™å°±æ˜¯å†…å®¹çš„ CID
```

---

## ğŸ“Š æ•°æ®æµç¨‹è¯¦è§£

### ä¿å­˜å¯¹è¯åˆ° IPFS

```
ç”¨æˆ·å‘é€æ¶ˆæ¯
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    save_chat_turn()                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  1. æ„å»ºå¯¹è¯æ•°æ®                                            â”‚
â”‚     {                                                        â”‚
â”‚       "wallet_address": "0x1234...",                        â”‚
â”‚       "user_message": "Hello",                              â”‚
â”‚       "assistant_reply": "Hi there!",                       â”‚
â”‚       "model_used": "gpt-4",                                â”‚
â”‚       "timestamp": "2025-11-28T12:00:00"                    â”‚
â”‚     }                                                        â”‚
â”‚                                                              â”‚
â”‚  2. ä¸Šä¼ åˆ° IPFS                                             â”‚
â”‚     _upload_to_ipfs(chat_data)                              â”‚
â”‚           â”‚                                                  â”‚
â”‚           â–¼                                                  â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚     â”‚  IPFS èŠ‚ç‚¹                                          â”‚ â”‚
â”‚     â”‚  â€¢ è®¡ç®—å†…å®¹å“ˆå¸Œ â†’ QmXxx123...                       â”‚ â”‚
â”‚     â”‚  â€¢ å­˜å‚¨æ•°æ®                                         â”‚ â”‚
â”‚     â”‚  â€¢ è‡ªåŠ¨ Pinï¼ˆå¦‚æœæ˜¯ local æ¨¡å¼ï¼‰                    â”‚ â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â”‚  3. æ›´æ–°ç´¢å¼•                                                â”‚
â”‚     _update_wallet_index(wallet, QmXxx123...)               â”‚
â”‚           â”‚                                                  â”‚
â”‚           â–¼                                                  â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚     â”‚  é’±åŒ…ç´¢å¼•                                           â”‚ â”‚
â”‚     â”‚  {                                                  â”‚ â”‚
â”‚     â”‚    "wallet_address": "0x1234...",                   â”‚ â”‚
â”‚     â”‚    "chat_hashes": [                                 â”‚ â”‚
â”‚     â”‚      "QmXxx123...",  â† æ–°å¢                         â”‚ â”‚
â”‚     â”‚      "QmYyy456...",                                 â”‚ â”‚
â”‚     â”‚    ],                                               â”‚ â”‚
â”‚     â”‚    "last_updated": "..."                            â”‚ â”‚
â”‚     â”‚  }                                                  â”‚ â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â”‚  4. è¿”å›ç»“æœ                                                â”‚
â”‚     {                                                        â”‚
â”‚       "ipfs_hash": "QmXxx123...",                           â”‚
â”‚       "metadataUrl": "ipfs://QmXxx123...",                  â”‚
â”‚       "gatewayUrl": "https://ipfs.io/ipfs/QmXxx123...",     â”‚
â”‚       "pinned": true                                         â”‚
â”‚     }                                                        â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ£€ç´¢å¯¹è¯å†å²

```
ç”¨æˆ·è¯·æ±‚å†å²è®°å½•
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                get_user_chat_history()                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  1. è·å–é’±åŒ…ç´¢å¼•                                            â”‚
â”‚     _get_wallet_index("0x1234...")                          â”‚
â”‚           â”‚                                                  â”‚
â”‚           â–¼                                                  â”‚
â”‚     ç´¢å¼•å†…å®¹ï¼š                                               â”‚
â”‚     {                                                        â”‚
â”‚       "chat_hashes": ["QmXxx...", "QmYyy...", "QmZzz..."]   â”‚
â”‚     }                                                        â”‚
â”‚                                                              â”‚
â”‚  2. é€ä¸ªæ£€ç´¢å¯¹è¯å†…å®¹                                        â”‚
â”‚     for hash in chat_hashes:                                â”‚
â”‚         _retrieve_from_ipfs(hash)                           â”‚
â”‚                                                              â”‚
â”‚  3. æŒ‰æ—¶é—´æ’åºå¹¶è¿”å›                                        â”‚
â”‚     [                                                        â”‚
â”‚       { "user_message": "...", "timestamp": "T1" },         â”‚
â”‚       { "user_message": "...", "timestamp": "T2" },         â”‚
â”‚       { "user_message": "...", "timestamp": "T3" },         â”‚
â”‚     ]                                                        â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš™ï¸ é…ç½®é€‰é¡¹

### .env æ–‡ä»¶å®Œæ•´é…ç½®

```env
# ============ IPFS å­˜å‚¨é…ç½® ============

# Pinning æœåŠ¡ç±»å‹ï¼š'local' | 'pinata' | 'none'
IPFS_PINNING_SERVICE=local

# æœ¬åœ° IPFS èŠ‚ç‚¹ API åœ°å€ï¼ˆç”¨äº local æ¨¡å¼ï¼‰
IPFS_API_URL=http://127.0.0.1:5001

# IPFS å…¬å…±ç½‘å…³ï¼ˆç”¨äºç”Ÿæˆå¯è®¿é—®çš„ URLï¼‰
IPFS_GATEWAY=https://ipfs.io/ipfs/

# Pinata é…ç½®ï¼ˆç”¨äº pinata æ¨¡å¼ï¼‰
# PINATA_JWT=eyJ...your_jwt_token
# æˆ–è€…ä½¿ç”¨ API Key:
# PINATA_API_KEY=your_api_key
# PINATA_SECRET_KEY=your_secret_key
```

---

## ğŸ” å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆé€‰æ‹© IPFS è€Œä¸æ˜¯ä¼ ç»Ÿæ•°æ®åº“ï¼Ÿ

| ç‰¹æ€§ | IPFS | ä¼ ç»Ÿæ•°æ®åº“ |
|------|------|-----------|
| å»ä¸­å¿ƒåŒ– | âœ… æ˜¯ | âŒ å¦ |
| å†…å®¹ä¸å¯å˜ | âœ… æ˜¯ | âŒ å¦ |
| å¯éªŒè¯æ€§ | âœ… å“ˆå¸ŒéªŒè¯ | âŒ ä¾èµ–ä¿¡ä»» |
| æŒä¹…åŒ– | ğŸ“Œ éœ€è¦ Pin | âœ… è‡ªåŠ¨ |
| é€‚ç”¨åœºæ™¯ | åŒºå—é“¾åº”ç”¨ | ä¼ ç»Ÿåº”ç”¨ |

### Q2: æœ¬åœ° IPFS vs Pinata å¦‚ä½•é€‰æ‹©ï¼Ÿ

**âš ï¸ é‡è¦ï¼šå¦‚æœä½ çš„åº”ç”¨æœ‰å¸‚åœºäº¤æ˜“åŠŸèƒ½ï¼Œå¿…é¡»ä½¿ç”¨ Pinataï¼**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å¸‚åœºåœºæ™¯å¯ç”¨æ€§å¯¹æ¯”                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   æœ¬åœ° IPFS æ¨¡å¼ï¼š                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚  å–å®¶ç”µè„‘åœ¨çº¿ â”€â”€â”€â–º ä¹°å®¶å¯ä»¥è®¿é—® âœ…                             â”‚    â”‚
â”‚   â”‚  å–å®¶ç”µè„‘ç¦»çº¿ â”€â”€â”€â–º ä¹°å®¶æ— æ³•è®¿é—® âŒ ï¼ˆäº¤æ˜“å¤±è´¥ï¼ï¼‰              â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                         â”‚
â”‚   Pinata æ¨¡å¼ï¼š                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚  å–å®¶ç”µè„‘åœ¨çº¿ â”€â”€â”€â–º ä¹°å®¶å¯ä»¥è®¿é—® âœ…                             â”‚    â”‚
â”‚   â”‚  å–å®¶ç”µè„‘ç¦»çº¿ â”€â”€â”€â–º ä¹°å®¶ä»å¯è®¿é—® âœ… ï¼ˆPinata 24/7 æä¾›æœåŠ¡ï¼‰    â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æœ¬åœ° IPFSï¼ˆä»…é™å¼€å‘/æµ‹è¯•ï¼‰ï¼š**
- âœ… å…è´¹
- âœ… å®Œå…¨æ§åˆ¶
- âŒ éœ€è¦æŒç»­è¿è¡Œå®ˆæŠ¤è¿›ç¨‹
- âŒ **ç”µè„‘å…³æœºåä¹°å®¶æ— æ³•è®¿é—®**
- âŒ **ä¸é€‚åˆå¸‚åœºäº¤æ˜“åœºæ™¯**

**Pinataï¼ˆç”Ÿäº§ç¯å¢ƒå¿…é€‰ï¼‰ï¼š**
- âœ… é«˜å¯ç”¨ï¼Œäº‘ç«¯æŒä¹…åŒ–
- âœ… æ— éœ€è¿è¡Œæœ¬åœ°èŠ‚ç‚¹
- âœ… å…¨çƒ CDN åŠ é€Ÿ
- âœ… **24/7 å¯ç”¨ï¼Œä¹°å®¶éšæ—¶å¯è®¿é—®**
- âœ… **é€‚åˆå¸‚åœºäº¤æ˜“åœºæ™¯**
- âŒ éœ€è¦ä»˜è´¹ï¼ˆæœ‰ 1GB å…è´¹é¢åº¦ï¼‰

### Q3: æ•°æ®çœŸçš„æ°¸ä¹…ä¿å­˜å—ï¼Ÿ

**å…³é”®ç‚¹ï¼š**
- IPFS æœ¬èº«ä¸ä¿è¯æŒä¹…åŒ–
- **å¿…é¡» Pin** æ‰èƒ½æ°¸ä¹…ä¿å­˜
- æœª Pin çš„æ•°æ®ä¼šè¢«åƒåœ¾å›æ”¶åˆ é™¤
- ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨å¤šä¸ª Pinning æœåŠ¡ä½œä¸ºå¤‡ä»½

### Q4: å¦‚ä½•å¤‡ä»½æ•°æ®ï¼Ÿ

```bash
# å¯¼å‡ºæ‰€æœ‰ pinned å†…å®¹çš„ CID
ipfs pin ls --type=recursive > pinned_cids.txt

# æˆ–è€…ä½¿ç”¨ IPFS Cluster è¿›è¡Œå¤šèŠ‚ç‚¹å¤åˆ¶
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹æ¡ˆ A: Pinata äº‘æœåŠ¡ï¼ˆæ¨è - ç”Ÿäº§ç¯å¢ƒï¼‰

```bash
# 1. æ³¨å†Œ Pinata: https://app.pinata.cloud
# 2. åˆ›å»º API Keyï¼Œè·å– JWT Token
# 3. é…ç½® .env
cat >> .env << EOF
IPFS_PINNING_SERVICE=pinata
PINATA_JWT=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.xxxxx...
IPFS_GATEWAY=https://gateway.pinata.cloud/ipfs/
EOF

# 4. å¯åŠ¨åç«¯
python -m flask --app backend.main:app run --reload
```

**ä¼˜ç‚¹**ï¼š
- âœ… 24/7 å¯ç”¨ï¼Œä¹°å®¶éšæ—¶å¯è®¿é—®
- âœ… æ— éœ€æœ¬åœ° IPFS èŠ‚ç‚¹
- âœ… å…¨çƒ CDN åŠ é€Ÿ
- âœ… å…è´¹ 1GB å­˜å‚¨

è¯¦ç»†é…ç½®ï¼š[PINATA_SETUP.md](./PINATA_SETUP.md)

### æ–¹æ¡ˆ B: æœ¬åœ° IPFSï¼ˆå¼€å‘æµ‹è¯•ï¼‰

```bash
# 1. å®‰è£… IPFS
brew install ipfs

# 2. åˆå§‹åŒ–
ipfs init

# 3. å¯åŠ¨å®ˆæŠ¤è¿›ç¨‹ï¼ˆæ–°ç»ˆç«¯ï¼Œéœ€ä¿æŒè¿è¡Œï¼‰
ipfs daemon

# 4. é…ç½® .env
cat >> .env << EOF
IPFS_PINNING_SERVICE=local
IPFS_API_URL=http://127.0.0.1:5001
EOF

# 5. å¯åŠ¨åç«¯
python -m flask --app backend.main:app run --reload
```

**æ³¨æ„**ï¼šæœ¬åœ°æ¨¡å¼ä¸‹ï¼Œå¦‚æœç”µè„‘å…³æœºï¼Œæ•°æ®æ— æ³•è¢«è®¿é—®ï¼

### æ–¹æ¡ˆ C: Mock æ¨¡å¼ï¼ˆçº¯æµ‹è¯•ï¼‰

```bash
# é…ç½® .envï¼ˆä¸éœ€è¦ IPFSï¼‰
echo 'IPFS_PINNING_SERVICE=none' >> .env

# å¯åŠ¨åç«¯
python -m flask --app backend.main:app run --reload
```

**æ³¨æ„**ï¼šMock æ¨¡å¼ä¸‹æ•°æ®åªå­˜åœ¨å†…å­˜ä¸­ï¼Œé‡å¯åä¸¢å¤±ï¼

---

## ğŸ“š ç›¸å…³æ–‡ä»¶

- `backend/services/storage_service.py` - å­˜å‚¨æœåŠ¡å®ç°
- `backend/config.py` - é…ç½®ç®¡ç†
- `PINATA_SETUP.md` - Pinata é…ç½®æŒ‡å—

---

## ğŸ”— å‚è€ƒé“¾æ¥

- [IPFS å®˜æ–¹æ–‡æ¡£](https://docs.ipfs.tech/)
- [Pinata å®˜æ–¹æ–‡æ¡£](https://docs.pinata.cloud/)
- [IPFS Desktop æ¡Œé¢åº”ç”¨](https://docs.ipfs.tech/install/ipfs-desktop/)

